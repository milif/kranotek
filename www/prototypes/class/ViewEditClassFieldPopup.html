<!DOCTYPE html>
<html>
  <head>
    <title>Prototype</title>
    <meta charset="utf-8">
    <!-- Bootstrap -->
    <link href="../../vendor/bootstrap/css/bootstrap.css" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="../../vendor/bootstrap/css/bootstrap-responsive.css" rel="stylesheet">



  </head>
  <body style="background: url(../background.png); ">

    <div class="container-fluid">
        <h1>Классы: Форма редактирования/добавления поля</h1>
        <div id="popup"></div>
    </div>

    <link href="../../css/b/nestedlist.css" rel="stylesheet">
    <link href="../../css/b/loading.css" rel="stylesheet">
    <link href="../../css/b/toolbarhover.css" rel="stylesheet">
    <link href="../../css/b/effects.css" rel="stylesheet">
    <link href="../../css/b/form.css" rel="stylesheet">
    <link href="../../css/b/tooltip.css" rel="stylesheet">
    <link href="../../css/b/systemmsg.css" rel="stylesheet">

    <link href="../../css/modules/class/classeditpanel.css" rel="stylesheet">

    <script src="../../vendor/jquery/jquery.js"></script>
    <script src="../../vendor/underscore/underscore.js"></script>
    <script src="../../vendor/backbone/backbone.js"></script>
    <script src="../../vendor/bootstrap/js/bootstrap.js"></script>

    <script src="../../src/App.js"></script>
    <script src="../../src/RPC.js"></script>
    <script src="../../src/CollectionNested.js"></script>

    <script src="../../src/view/NestedList.js"></script>
    <script src="../../src/view/Popup.js"></script>
    <script src="../../src/view/toolbar/Toolbar.js"></script>
    <script src="../../src/view/toolbar/ToolbarHover.js"></script>
    <script src="../../src/view/button/Button.js"></script>

    <script src="../../src/view/tooltip/Tooltip.js"></script>

    <script src="../../src/view/container/Container.js"></script>
    <script src="../../src/view/container/ContainerRow.js"></script>

    <script src="../../src/view/form/Form.js"></script>
    <script src="../../src/view/form/Field.js"></script>
    <script src="../../src/view/form/FieldText.js"></script>
    <script src="../../src/view/form/FieldTextarea.js"></script>
    <script src="../../src/view/form/FieldCheckbox.js"></script>
    <script src="../../src/view/form/FieldSelect.js"></script>

    <script src="../../src/modules/class/ModelClass.js"></script>
    <script src="../../src/modules/class/ModelClassField.js"></script>
    <script src="../../src/modules/class/CollectionClass.js"></script>

    <script src="../../src/modules/class/ViewEditClassFieldPopup.js"></script>

    <script>

        App.env = {
            apiUrl: '/app_dev.php',
            apiUrlSuffix: ''
        }

        var ViewEditClassFieldPopup = App.getView('ViewEditClassFieldPopup'),
            Button = App.getView('Button'),
            ModelClassField = App.getModel('ModelClassField'),
            model = new ModelClassField({
                'id': 1,
                'Name': 'height',
                'Description': 'total height',
                'Type': 0,
                'Default': '2123',
                'Unique': false,
                'Required': false
            }),
            view = new ViewEditClassFieldPopup({
                model: model,
                popupWidth: 500
            });

        $('#popup')
            .append(new Button({
                text: 'Open',
                click: function(){
                    view.open();
                }
            }).$el);

        view.$el.appendTo($('#editpanel'));

        view.setModel();

        view.setModel(new ModelClassField({
            'id': 25,
            'Name': 'color',
            'Description': 'object color',
            'Type': 7,
            'Default': 'red',
            'Unique': true,
            'Required': true
        }));

    </script>
  </body>
</html>
